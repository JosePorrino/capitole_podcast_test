#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

art_ascii=$(cat << "EOF"
______ ______ ______ ______ ______ ______ ______ ______ ______ 
|______|______|______|______|______|______|______|______|______|
______         _               _     _____         _   
| ___ \       | |             | |   |_   _|       | |  
| |_/ /__   __| | ___ __ _ ___| |_    | | ___  ___| |_ 
|  __/ _ \ / _` |/ __/ _` / __| __|   | |/ _ \/ __| __|
| | | (_) | (_| | (_| (_| \__ \ |_    | |  __/\__ \ |_ 
\_|  \___/ \__,_|\___\__,_|___/\__|   \_/\___||___/\__|
 ______ ______ ______ ______ ______ ______ ______ ______ ______ 
|______|______|______|______|______|______|______|______|______|
                                                                       
EOF
)

echo "$art_ascii"
echo 'ğŸ—ï¸ğŸ‘· Revisando tu proyecto antes de confirmar'
echo 'Por favor, ten paciencia, esto puede llevar un tiempo...'

# Comprobar los test
npm run test || (
    echo 'ğŸ”¨âŒ Â¡Oops! Tienes un problema en tu cÃ³digo. Comprueba tus test ğŸ”¨âŒ
          Ejecuta npm run test, agrega los cambios y vuelve a intentar confirmar.';
    false;
)

# Comprobar los estÃ¡ndares de ESLint
npm run eslint ||
(
    echo 'ğŸ”¨âŒ Â¡Oops! Tienes un problema en tu cÃ³digo. Comprueba el linter ğŸ”¨âŒ
          Ejecuta npm run eslint, agrega los cambios y vuelve a intentar confirmar.';
    false;
)

echo "ğŸ—ï¸ğŸ‘· Linting/Formatting ..."
npx lint-staged

echo 'ğŸ‰ No se encontraron errores: confirmando ahora.... âœ¨ğŸš€ğŸ„â€â™‚ï¸ğŸ»'
